@(loginForm: play.api.data.Form[User], registerForm: play.api.data.Form[User], searchForm: play.api.data.Form[Search.LogSearch])(implicit flash: play.api.mvc.Flash, session: play.api.mvc.Session)

@import helper._
@import enums._

@main(loginForm, registerForm) {

<div class="jumbotron" ng-controller="LogicController">
    <div class="row">
        <div class="col-md-4">
            <canvas id="myChart" width="200" height="200" style="margin-top: 40px;"></canvas>
        </div>
        <div class="col-md-4">
            <h1>Log.ic</h1>
            <p class="lead"> Find logs </p>

            <div ng-hide="search">

                @form(controllers.routes.Search.search("2")){
                    <fieldset>

                        @select(field = searchForm("application"), options = options(
                        controllers.Manage.getApplications().map(_.name)), 'class->"form-control", '_label-> "", '_default -> " Choose Application ")

                        @select(field = searchForm("environment"), options = options(
                        controllers.Manage.getEnvironments().map(_.name)), 'class->"form-control", '_label-> "", '_default -> " Choose Environment ")

                        @select(field = searchForm("region"), options = options(
                        controllers.Manage.getRegions().map(_.name)), 'class->"form-control", '_label-> "", '_default -> " Choose Region ")

                        @select(field = searchForm("level"), options = options(
                        LogLevelEnum.values.toList.map(_.toString)), 'class->"form-control",
                        '_label-> "", '_default -> " Choose Log Level ", 'id -> "level")

                        <span style="display: none">@inputText(
                            searchForm("exception"),
                            '_label -> "Exception"
                        )</span>
                        <span style="display: none">@inputText(
                            searchForm("message"),
                            '_label -> "Message"
                        )</span>
                        <span style="display: none">@inputText(
                            searchForm("date"),
                            '_label -> "Date"
                        )</span>
                    </fieldset>
                    <a class="btn btn-lg btn-success" ng-click="doSearch();search=!search">Search</a>
                }

            </div>

        </div>

        <div class="col-md-4">
            <canvas id="myChart2" width="250" height="250"></canvas>
        </div>

        <div class="col-md-10 col-md-offset-1" ng-show="search">
            <a class="btn btn-lg btn-info" style="margin-top: -50px;" ng-click="search=!search">New Search</a>
            <br><br>
            <div class="well">

                <div ng-repeat="log in logData track by $index">
                    <span class="">{{log.level}}</span>
                    <span class="">{{log.message}}</span>
                    <span class="">{{log.exception}}</span>
                </div>

            </div>
        </div>
    </div>

    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-3 col-md-offset-2">
                <h2>Precog</h2>
                <p> Predict failure </p>
                <p><a class="btn btn-lg btn-primary" href="./precog">go &raquo;</a></p>
            </div>
            <div class="col-md-3">
                <h2>Notify</h2>
                <p> Notification Triggers </p>
                <p><a class="btn btn-lg btn-primary" href="./notify">go &raquo;</a></p>
            </div>
            <div class="col-md-3">
                <h2>Metrics</h2>
                <p> Behavior and performance </p>
                <p><a class="btn btn-lg btn-primary" href="./metrics">go &raquo;</a></p>
            </div>
        </div>
    </div>

}

        <script type="text/javascript">

            var data = {
                labels : ["January","February","March","April","May","June","July"],
                datasets : [
                    {
                        fillColor : "rgba(220,220,220,0.5)",
                        strokeColor : "rgba(220,220,220,1)",
                        pointColor : "rgba(220,220,220,1)",
                        pointStrokeColor : "#fff",
                        data : [65,59,90,81,56,55,40]
                    },
                    {
                        fillColor : "rgba(151,187,205,0.5)",
                        strokeColor : "rgba(151,187,205,1)",
                        pointColor : "rgba(151,187,205,1)",
                        pointStrokeColor : "#fff",
                        data : [28,48,40,19,96,27,100]
                    }
                ]
            };

            var radarChartData = {
                labels : ["Fatal","Error","Warning","Info","Debug","Trace","Severe"],
                datasets : [
                    {
                        fillColor : "rgba(220,220,220,0.5)",
                        strokeColor : "rgba(220,220,220,1)",
                        pointColor : "rgba(220,220,220,1)",
                        pointStrokeColor : "#fff",
                        data : [65,59,90,81,56,55,40]
                    },
                    {
                        fillColor : "rgba(205,152,161,0.5)",
                        strokeColor : "rgba(205,152,161,1)",
                        pointColor : "rgba(205,152,161,1)",
                        pointStrokeColor : "#fff",
                        data : [28,48,40,19,96,27,100]
                    }
                ]

            };


            var myPolarArea = new Chart($("#myChart").get(0).getContext("2d")).Line(data);
            var myRadarArea = new Chart($("#myChart2").get(0).getContext("2d")).Radar(radarChartData,{scaleShowLabels : false, pointLabelFontSize : 10});

        </script>
