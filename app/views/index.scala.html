@(loginForm: play.api.data.Form[User], registerForm: play.api.data.Form[User], searchForm: play.api.data.Form[Search.LogSearch])(implicit flash: play.api.mvc.Flash, session: play.api.mvc.Session)

@import helper._
@import enums._

@main(loginForm, registerForm) {

<div class="jumbotron" ng-controller="LogicController">
    <div class="row">
        <div class="col-md-4">
            <canvas id="myChart" width="200" height="200" style="margin-top: 40px;"></canvas>
        </div>
        <div class="col-md-4">
            <h1 style="color: #bfb8e5; margin-top: -20px;">Log.ic</h1>
            <p class="lead" style="color: #8d79f2;"> Find logs </p>

            <div ng-hide="search">

                <fieldset>
                    @select(field = searchForm("application"), options = options(
                    controllers.Manage.getApplications().map(_.name)), 'class->"form-control", 'id -> "app", '_label-> "", '_default -> " Choose Application ")

                    @select(field = searchForm("environment"), options = options(
                    controllers.Manage.getEnvironments().map(_.name)), 'class->"form-control", 'id -> "env", '_label-> "", '_default -> " Choose Environment ")

                    @select(field = searchForm("region"), options = options(
                    controllers.Manage.getRegions().map(_.name)), 'class->"form-control", 'id -> "region", '_label-> "", '_default -> " Choose Region ")

                    @select(field = searchForm("level"), options = options(
                    LogLevelEnum.values.toList.map(_.toString)), 'class->"form-control",
                    '_label-> "", '_default -> " Choose Log Level ", 'id -> "level")

                    <div style="color: #8d79f2;">
                        @inputText( searchForm("exception"), 'class->"form-control", 'placeholder -> "Exception", 'id -> "exception",
                        '_label -> "Exception")

                        @inputText( searchForm("message"), 'class->"form-control", 'placeholder -> "Message", 'id -> "message",
                        '_label -> "Message" )

                        @inputText( searchForm("beforeDate"), 'class->"form-control", 'placeholder -> "Before Date", 'id -> "beforeDate",
                        '_label -> "Before Date" )

                        @inputText( searchForm("afterDate"), 'class->"form-control", 'placeholder -> "After Date", 'id -> "afterDate",
                        '_label -> "After Date" )
                    </div>

                </fieldset>

                <a class="btn btn-lg btn-success" ng-click="doSearch();search=!search">Search</a>

            </div>
        </div>

        <div class="col-md-4">
            <canvas id="myChart2" width="250" height="250"></canvas>
        </div>

        <div class="col-md-10 col-md-offset-1" ng-show="search">
            <a class="btn btn-lg btn-info" style="margin-top: -50px;" ng-click="search=!search">New Search</a>
            <br><br>
            <div class="well">

                <div ng-repeat="log in logData track by $index">
                    <span class="">{{log.level}}</span>
                    <span class="">{{log.message}}</span>
                    <span class="">{{log.exception}}</span>
                </div>

            </div>
        </div>
    </div>

    </div>

    <div class="container">
        <div class="row" style="color: #8d79f2;">
            <div class="col-md-3 col-md-offset-2">
                <h2>Precog</h2>
                <p> Predict failure </p>
                <p><a class="btn btn-lg btn-primary" href="./precog">go &raquo;</a></p>
            </div>
            <div class="col-md-3">
                <h2>Notify</h2>
                <p> Notification Triggers </p>
                <p><a class="btn btn-lg btn-primary" href="./notify">go &raquo;</a></p>
            </div>
            <div class="col-md-3">
                <h2>Metrics</h2>
                <p> Behavior and performance </p>
                <p><a class="btn btn-lg btn-primary" href="./metrics">go &raquo;</a></p>
            </div>
        </div>
    </div>

}

        <script type="text/javascript">

            var data = {
                labels : ["January","February","March","April","May","June","July"],
                datasets : [
                    {
                        fillColor : "rgba(175,161,220,0.5)",
                        strokeColor : "rgba(175,161,220,1)",
                        pointColor : "rgba(175,161,220,1)",
                        pointStrokeColor : "#fff",
                        data : [65,59,90,81,56,55,40]
                    },
                    {
                        fillColor : "rgba(151,187,205,0.5)",
                        strokeColor : "rgba(151,187,205,1)",
                        pointColor : "rgba(151,187,205,1)",
                        pointStrokeColor : "#fff",
                        data : [28,48,40,19,96,27,100]
                    }
                ]
            };

            var radarChartData = {
                labels : ["Fatal","Error","Warning","Info","Debug","Trace","Severe"],
                datasets : [
                    {
                        fillColor : "rgba(175,161,220,0.5)",
                        strokeColor : "rgba(175,161,220,1)",
                        pointColor : "rgba(175,161,220,1)",
                        pointStrokeColor : "#fff",
                        data : [65,59,90,81,56,55,40]
                    },
                    {
                        fillColor : "rgba(205,152,161,0.5)",
                        strokeColor : "rgba(205,152,161,1)",
                        pointColor : "rgba(205,152,161,1)",
                        pointStrokeColor : "#fff",
                        data : [28,48,40,19,96,27,100]
                    }
                ]

            };


            var myPolarArea = new Chart($("#myChart").get(0).getContext("2d")).Line(data,{scaleFontColor : "#AFA1F6", scaleGridLineColor : "rgba(175,161,220,0.5)"});
            var myRadarArea = new Chart($("#myChart2").get(0).getContext("2d")).Radar(radarChartData,{scaleShowLabels : false, pointLabelFontSize : 10, pointLabelFontColor : "#AFA1F6", scaleLineColor : "rgba(175,161,220,0.5)", angleLineColor : "rgba(175,161,220,0.5)"});
        </script>
